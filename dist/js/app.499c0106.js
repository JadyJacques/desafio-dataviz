webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,n){t.exports=n("NHnr")},"2DFY":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/5sW"),i=(n("SldL"),n("7hDC")),a=n.n(i),s=n("rzQm"),u=n.n(s),o=(n("9Yib"),n("A0n/"),n("fx22"),n("uDYd"),n("Z60a")),c=n.n(o),l=n("j/rp"),h=n.n(l),f=n("C9uT"),y=n.n(f),p=n("T/v0"),v=n.n(p),d=n("tNLN"),m=n.n(d),b=n("BnCw"),g=n.n(b);n("EuXz"),n("y9m4"),n("n12u"),n("mJx5"),n("VjuZ");Date.prototype.format=function(t){if(!this.strings)for(var e in this.strings={},Date.formatStrings){var n=Date.formatStrings[e],r=void 0;r=n[0]instanceof Function?n[0](this):this[n[0]](),n.length>=3&&(r+=n[2]),n.length>=2&&(r=r.pad(n[1])),this.strings[e]=r}for(var i in Date.formatStrings)t=t.replace(i,this.strings[i]);return t},Date.prototype.getLocalizedMonth=function(t){return Date[t].months[this.getMonth()]},Date.prototype.getLocalizedWeekday=function(t){return Date[t].weekdays[this.getDay()]},Date.formatStrings={d:["getDate",2],j:["getDate"],m:["getMonth",2,1],Y:["getFullYear",4],H:["getHours",2],h:[function(t){return t.getHours()-(t.getHours()>12?12:0)},2],i:["getMinutes",2],s:["getSeconds",2],A:[function(t){return t.getHours()>12?"PM":"AM"},2]},Date.ptbr={weekdays:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]},Date.fromInputDate=function(t,e){var n=0,r=0,i=0,a=0,s=0;return t&&(t=$(t).val(),t&&(t=t.split("-"),i=parseInt(t[0]),r=parseInt(t[1])-1,n=parseInt(t[2]))),e&&(e=$(e).val(),e&&(e=e.split(":"),a=parseInt(e[0]),s=parseInt(e[1]))),new Date(i,r,n,a,s,0,0)},Date.prototype.stdTimezoneOffset=function(){var t=this.getFullYear();if(!Date.prototype.stdTimezoneOffset.cache.hasOwnProperty(t)){for(var e=new Date(t,0,1).getTimezoneOffset(),n=[6,7,5,8,4,9,3,10,2,11,1],r=0;r<12;r++){var i=new Date(t,n[r],1).getTimezoneOffset();if(i!==e){e=Math.max(e,i);break}}Date.prototype.stdTimezoneOffset.cache[t]=e}return Date.prototype.stdTimezoneOffset.cache[t]},Date.prototype.stdTimezoneOffset.cache={},Date.prototype.isDST=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()},RegExp.Email=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Math.randomInt=function(t,e){return e||(e=0),Math.floor(Math.random()*(t-e))+e},String.prototype.pad=function(t,e,n){var r=this+"";if(n)while(r.length<e)r+=t;else while(r.length<e)r=t+r;return r},String.prototype.format=function(t,e){e||(e=function(t){return"{".concat(t,"}")});var n=this.toString();for(var r in t)if(t.hasOwnProperty(r)){var i=e;"string"===typeof e?i=e.replace("?",r):e instanceof Function&&(i=e(r)),n=n.replace(new RegExp(RegExp.escape(i),"g"),t[r])}return n},String.prototype.nl2br=function(){return this.replace(/\n/g,"<br>")},RegExp.escape=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Number._decimalChar=".",Number.setDecimalChar=function(t){this._decimalChar=t},Number.prototype.pad=function(t,e,n){n||(n=Number._decimalChar);var r=this<0,i=Math.abs(this),a=i.toString();a=a.split(".");var s=a[0].pad("0",t||0);return e&&1===a.length&&(a[1]="0"),2===a.length&&(s+=n+a[1].pad("0",e,!0)),r&&(s="-"+s),s},Number.prototype.trimPrecision=function(t){var e=Math.pow(10,t);return Math.round(this*e)/e};var A=function(){function t(){c()(this,t)}return y()(t,[{key:"GetUId",value:function(){if(!this.__uid){t.counter++;var e=Date.now(),n=Math.randomInt(9999999).pad(7);this.__uid="".concat(e,"_").concat(t.counter,"_").concat(n)}return this.__uid}}]),t}();A.counter=0;var _=function(t){function e(){var t;return c()(this,e),t=v()(this,m()(e).call(this)),t.__autoEvents&&t.__autoEvents(),t}return h()(e,t),e}(A);_.AnyEvent="*";var k={on:function(t,e,n,r){return this.__boundEvents||Object.defineProperty(this,"__boundEvents",{enumerable:!1,writable:!1,value:{}}),this.__boundEvents[t]||(this.__boundEvents[t]=[]),this.__boundEvents[t].push({callback:e,key:n,once:r}),this},onAny:function(t,e,n){return this.on(_.AnyEvent,t,e,n)},off:function(t,e){if(!this.__boundEvents||!this.__boundEvents[t])return this;if(e instanceof Array)for(var n=0;n<e.length;n++)this.off(t,e[n]);else if(e){var r;e.callback instanceof Function?r=this.__boundEvents[t].indexOf(e):(e=this.__boundEvents[t].filter(function(t){return t.key===e}),e.length&&(r=this.__boundEvents[t].indexOf(e[0]))),r>=0&&this.__boundEvents[t].splice(r,1)}else this.__boundEvents[t]=[];return this},offAny:function(t){return this.off(_.AnyEvent,t)},emit:function(t,e){if(this.__boundEvents&&this.__boundEvents[t]){for(var n=[],r=this.__boundEvents[t].concat([]),i=0;i<r.length;i++){var a=r[i];a.callback.apply(this,e),a.once&&n.push(a)}this.off(t,n)}return t!==_.AnyEvent&&this.__boundEvents&&this.__boundEvents[_.AnyEvent]&&this.emit(_.AnyEvent,[t].concat(e)),this},once:function(t,e,n){return this.on(t,e,n,!0),this}};for(var S in Object.assign(_.prototype,k),Object.assign(Array.prototype,k),Array.prototype.selfConcat=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e instanceof Array&&this.push.apply(this,e)}},Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])},Array.prototype.remove=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}),this},Array.prototype.flatten=function(){return this.reduce(function(t,e){return t.concat(Array.isArray(e)?e.flatten():e)},[])},Array.prototype.unique=function(){if(0===arguments.length)return!!this._unique;this._unique=arguments[0]},Array.prototype.super_push=Array.prototype.push,Array.prototype.push=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.unique()){var r=0;while(r<e.length){var i=e[r];this.indexOf(i)>=0?e.splice(r,1):r++}}return this.emit("add",[e]),this.super_push.apply(this,e)},Array.prototype.super_splice=Array.prototype.splice,Array.prototype.splice=function(){var t=this.super_splice.apply(this,arguments);return t.length&&this.emit("remove",[t]),t},Array.prototype.insertAt=function(t,e){return this.splice(t,0,e),this.emit("add",[[e]]),this},Array.prototype)Array.prototype.hasOwnProperty(S)&&Object.defineProperty(Array.prototype,S,{enumerable:!1,writable:!1});Array.prototype.mapAsync=function(){var t=a()(regeneratorRuntime.mark(function t(e){var n,r,i,a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(n=[],r=[],i=function(t){var i=e(s[t]),a=t;i.then(function(t){r[a]=t}),n.push(i)},a=0;a<this.length;a++)i(a);return t.next=6,Promise.all(n);case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),Object.map=function(t,e){var n=Object.keys(t);return n.reduce(function(n,r){return n[r]=e(t[r],r),n},{})},Object.mapToArray=function(t,e){var n=Object.keys(t);return n.map(function(n){return e(t[n],n)})};var w=function(t){function e(t){var n;return c()(this,e),n=v()(this,m()(e).call(this)),n.defineProperties(),n.FillFromArray(t),n}return y()(e,[{key:"defineProperties",value:function(){var t=this.constructor.Attributes,e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;s.define(this)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"FillFromArray",value:function(t){t||(t=[]);for(var e=this.constructor.Attributes,n=0;n<e.length;n++){var r=e[n],i=r.name;if(t.hasOwnProperty(i)||!this.hasOwnProperty(i)){var a=t[i];"undefined"===typeof a&&(a=null),r.Set(this,a)}}t["__class"]&&(this.__class=t["__class"]),this.emit("fill")}},{key:"GetAttribute",value:function(t){return this.constructor.GetAttribute(t)}},{key:"Get",value:function(t){if(t.Get)return t.Get(this);if(t instanceof Function)return t(this);var e=this.GetAttribute(t);return e?e.Get(this):this[t]}},{key:"Set",value:function(t,e){if(t.Set)return t.Set(this);if(t instanceof Function)return t(this,e);var n=this.GetAttribute(t);if(n)return n.Set(this,e);this[t]=e}},{key:"Serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.constructor.Attributes,i={};t=!!t;for(var a=0;a<r.length;a++){var s=r[a];s.serialize()&&(n.length&&-1===n.indexOf(s.name)||t&&!s.safe()||(i[s.name]=s.Get(this,t)))}return this.__class?i["__class"]=this.__class:i["__class"]=e.ClassMap.getClassName(this),i}},{key:"toJSON",value:function(){return this.Serialize()}},{key:"clone",value:function(){var t=JSON.parse(JSON.stringify(this.Serialize()));return e.FromPlainObject(t)}},{key:"GetKey",value:function(){return this.KeyName?this.Get(this.KeyName):this.Get(this.constructor.Attributes[0])}},{key:"equals",value:function(t){return t.GetKey()===this.GetKey()}},{key:"equalsDeep",value:function(t){if(!t)return!1;var e=this.constructor.Attributes,n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(!u.equals(this,t))return!1}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}},{key:"delta",value:function(t){var e=this.constructor.Attributes,n={},r=!0,i=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var o=s.value;o.equals(this,t)||(n[o.name]=o.delta(this,t))}}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}},{key:"applyDelta",value:function(t){var e=this.constructor.Attributes,n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;t.hasOwnProperty(u.name)&&u.applyDelta(this,t[u.name])}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}}],[{key:"Inherit",value:function(t){this.AttributesInherit(t)}},{key:"AttributesInherit",value:function(t){if(t){var e=t.Attributes,n=this.Attributes||[];e&&n&&e.concat&&(n=e.concat(n)),this.Attributes=n}}},{key:"GetAttribute",value:function(t){var e=this.Attributes.filter(function(e){return e.name===t});return e.length?e[0]:null}},{key:"getName",value:function(){var t=this.name;return this.namespace&&(t=this.namespace+"."+t),t}},{key:"Register",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||(t=this.getName()),e.ClassMap.Register(this,t)}},{key:"FromPlainObject",value:function(t){if(!t)return null;if(!t.__class)throw"Object doesn't describe it's class, make sure it contains a __class property";var e=this.ClassMap.getClassFromName(t.__class);if(!(e instanceof Function))throw"Couldn't locate class within current scope, make sure the script defining the class: "+t.__class;return new e(t)}},{key:"FromPlainObjectArray",value:function(t,n){var r=[];for(var i in t)t.hasOwnProperty(i)&&(r[i]=n?new n(this[i]):e.FromPlainObject(this[i]));return r}}]),h()(e,t),e}(_);w.prototype.proxyArrayEvents=function(t,e){var n=this,r=this.GetUId();t.onAny(function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];n.emit("list-change",[t,e].concat(i))},r),t.on("add",function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.emit("list-add",[e].concat(r))},r),t.on("remove",function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.emit("list-remove",[e].concat(r))},r)},w.prototype.unProxyArrayEvents=function(t){var e=this.GetUId();t.offAny(e),t.off("add",e),t.off("remove",e)},w.ClassMap={map:{},getClassName:function(t){return t instanceof Function||(t=t.constructor),t.__class},getClassFromName:function(t){return this.map[t]},Register:function(t,e){e||(e=t.name),t.__class=e,this.map[e]=t}},Array.prototype.sortByField=function(t){return t instanceof Array||(t=[t]),this.sort(function(e,n){var r=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var o=s.value;if(e.Get(o)<n.Get(o))return-1;if(e.Get(o)>n.Get(o))return 1}}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return 0})},Object.defineProperty(Array.prototype,"sortByField",{enumerable:!1,writable:!1}),w.Attributes={},w.Attributes.Object=function(){function t(e){c()(this,t),this.name=e,this._database=!0,this._safe=!0,this._serialize=!0,this._index=!1,this._unique=!1,this._sparse=!1,this._watchable=!1}return y()(t,[{key:"define",value:function(t){var e={configurable:!0,enumerable:!0};if(this.watchable()){this.privateKey="__"+this.name,Object.defineProperty(t,this.privateKey,{configurable:!0,enumerable:!1,writable:!0});var n=this;e.get=function(){return t.emit("get",[n]),t[n.privateKey]},e.set=function(e){var r=t[n.privateKey];t[n.privateKey]=e,t.emit("set",[n,e,r]),e instanceof Array&&t.proxyArrayEvents(e,n),r instanceof Array&&(t.emit("list-remove",[n,r]),t.emit("list-add",[n,e]),t.unProxyArrayEvents(r))}}else e.value=null,e.writable=!0;Object.defineProperty(t,this.name,e),this.Set(t,null)}},{key:"_setOrReturnKey",value:function(t,e){return null!==e&&"undefined"!==typeof e?(this[t]=e,this):this[t]}},{key:"database",value:function(t){return this._setOrReturnKey("_database",t)}},{key:"safe",value:function(t){return this._setOrReturnKey("_safe",t)}},{key:"serialize",value:function(t){return this._setOrReturnKey("_serialize",t)}},{key:"index",value:function(t){return this._setOrReturnKey("_index",t)}},{key:"watchable",value:function(t){return this._setOrReturnKey("_watchable",t)}},{key:"unique",value:function(t){return t&&this.index(t),this._setOrReturnKey("_unique",t)}},{key:"sparse",value:function(t){return t&&this.index(t),this._setOrReturnKey("_sparse",t)}},{key:"Get",value:function(t){return t[this.name]}},{key:"Set",value:function(t,e){t[this.name]=e}},{key:"compare",value:function(t,e){return this.Get(t)<this.Get(e)?-1:this.Get(t)>this.Get(e)?1:0}},{key:"equals",value:function(t,e){return this.Get(t)===this.Get(e)}},{key:"delta",value:function(t,e){return this.Get(e)}},{key:"applyDelta",value:function(t,e){return this.Set(t,e)}}]),t}(),w.Attributes.String=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"Get",value:function(t){return null===t[this.name]?null:t[this.name].toString()}},{key:"Set",value:function(t,e){t[this.name]=null===e?null:e.toString()}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.FormattedString=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"format",value:function(t){return this._setOrReturnKey("_format",t)}},{key:"Set",value:function(t,e){this.format()&&(e=this.format()(e)),t[this.name]=null===e?null:e.toString()}}]),h()(e,t),e}(w.Attributes.String),w.Attributes.Integer=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c()(this,e),r=v()(this,m()(e).call(this,t)),r.nullable=!!n,r.def=i,r}return y()(e,[{key:"Get",value:function(t){var e=parseInt(t[this.name],10);return isNaN(e)?this.nullable?null:this.def:e}},{key:"Set",value:function(t,e){e=parseInt(e,10),t[this.name]=isNaN(e)?this.nullable?null:this.def:e}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.Float=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"Get",value:function(t){var e=parseFloat(t[this.name]);return isNaN(e)?this.nullable?null:this.def:e}},{key:"Set",value:function(t,e){e=parseFloat(e),t[this.name]=isNaN(e)?this.nullable?null:this.def:e}}]),h()(e,t),e}(w.Attributes.Integer),w.Attributes.Boolean=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"Get",value:function(t){var e=t[this.name];return this.nullable&&null===e?null:!!e}},{key:"Set",value:function(t,e){this.nullable&&null===e?t[this.name]=null:t[this.name]=!!e}}]),h()(e,t),e}(w.Attributes.Integer),w.Attributes.Json=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"Get",value:function(t){return JSON.stringify(t[this.name])}},{key:"Set",value:function(t,e){t[this.name]=JSON.parse(e)}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.Array=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"Get",value:function(t){return t[this.name]}},{key:"Set",value:function(t,e){t[this.name]=e&&e instanceof Array?e:[]}},{key:"equals",value:function(t,e){return JSON.stringify(this.Get(t))===JSON.stringify(this.Get(e))}},{key:"delta",value:function(t,e){for(var n=this.Get(t),r=this.Get(t),i={length:r.length,changes:[]},a=0;a<r.length;a++){var s=n[a],u=r[a];a>=n.length?i.changes.push([a,u]):s!==u&&i.changes.push([a,u])}return i}},{key:"applyDelta",value:function(t,e){var n=this.Get(t).slice(0,e.length),r=!0,i=!1,a=void 0;try{for(var s,u=e.changes[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var o=s.value;n[o[0]]=o[1]}}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return this.Set(t,n)}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.Entity=function(t){function e(t,n,r){var i;return c()(this,e),i=v()(this,m()(e).call(this,t)),i.defaultEntity=n,i.encodeAsJson=!!r,i._referential=!1,i._default=null,i}return y()(e,[{key:"default",value:function(t){return this._setOrReturnKey("_default",t)}},{key:"referential",value:function(){return arguments.length?(this._referential=!!arguments[0],this):this._referential}},{key:"Get",value:function(t,e){var n=t[this.name]?t[this.name].Serialize(!!e):this._default;return this.encodeAsJson?JSON.stringify(n):n}},{key:"Set",value:function(t,e){var n="string"===typeof e?JSON.parse(e):e;e||(n=this._default),this.defaultEntity?t[this.name]=n?new this.defaultEntity(n):null:t[this.name]=n?w.FromPlainObject(n):null}},{key:"equals",value:function(t,e){return t[this.name]&&t[this.name]?t[this.name].equalsDeep(e[this.name]):t[this.name]===e[this.name]}},{key:"delta",value:function(t,e){var n=t[this.name],r=e[this.name];return n?n.delta(r):r.Serialize()}},{key:"applyDelta",value:function(t,e){t[this.name]?t[this.name].applyDelta(e):this.Set(t,e)}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.EntityList=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"Get",value:function(t,e){var n=t[this.name],r=n.map(function(t){return t.Serialize(!!e)});return this.encodeAsJson?JSON.stringify(r):r}},{key:"Set",value:function(t,e){var n=this,r="string"===typeof e?JSON.parse(e):e;r||(r=[]),r=r.map(function(t){return n.defaultEntity?new n.defaultEntity(t):w.FromPlainObject(t)}),t[this.name]=r}},{key:"equals",value:function(t,e){var n=t[this.name],r=e[this.name];if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i],s=r[i];if(!a.equalsDeep(s))return!1}return!0}},{key:"delta",value:function(t,e){for(var n=t[this.name],r=e[this.name],i={l:r.length,c:[]},a=0;a<r.length;a++){var s=n[a],u=r[a];a>=n.length?i.c.push([a,u.Serialize()]):s.equalsDeep(u)||i.c.push([a,s.delta(u)])}return i}},{key:"applyDelta",value:function(t,e){var n=t[this.name].slice(0,e.l),r=!0,i=!1,a=void 0;try{for(var s,u=e.c[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var o=s.value,c=o[0],l=o[1];c<n.length?n[c].applyDelta(l):(l=this.defaultEntity?new this.defaultEntity(l):w.FromPlainObject(l),n[c]=l)}}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}t[this.name]=n}}]),h()(e,t),e}(w.Attributes.Entity),w.Attributes.Date=function(t){function e(t,n,r){var i;return c()(this,e),i=v()(this,m()(e).call(this,t)),i.unix=!!n,i.absolute=!!r,i}return y()(e,[{key:"Get",value:function(t){if(t[this.name]instanceof Date){if(!this.unix)return t[this.name];if(this.absolute){var e=new Date(t[this.name].getTime());return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),Math.floor(e.getTime()/1e3)}return Math.floor(t[this.name].getTime()/1e3)}return null}},{key:"Set",value:function(t,e){if(e instanceof Date)t[this.name]=e;else{if("string"===typeof e){var n=Date.parse(e);e=isNaN(n)?1e3*parseInt(e,10):n}else e*=1e3;if(null===e||isNaN(e))t[this.name]=null;else{var r=new Date(e);this.absolute&&r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),t[this.name]=r}}}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.Custom=function(t){function e(t,n,r,i){var a;return c()(this,e),a=v()(this,m()(e).call(this,t)),a.type=n,a.getFn=r,a.setFn=i,a}return y()(e,[{key:"Get",value:function(t){return this.getFn(t)}},{key:"Set",value:function(t,e){this.setFn&&this.setFn(t,e)}}]),h()(e,t),e}(w.Attributes.Object),w.Attributes.EntityMap=function(t,e){this.name=t,this.encodeAsJson=!!e},w.Attributes.EntityMap.prototype.Get=function(t){var e=t[this.name],n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n[r]=i.Serialize()}return this.encodeAsJson?JSON.stringify(n):n},w.Attributes.EntityMap.prototype.Set=function(t,e){var n=this.encodeAsJson?JSON.parse(e):e;n||(n=[]);var r=[];for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];r[i]=w.FromPlainObject(a)}t[this.name]=r};var O=w,E=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return y()(e,[{key:"toString",value:function(){return"rgba(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")}},{key:"Serialize",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"FillFromArray",value:function(t){t.r?g()(m()(e.prototype),"FillFromArray",this).call(this,t):(this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3])}}],[{key:"transition",value:function(t,n,r){var i=Math.round((n.r-t.r)*r),a=Math.round((n.g-t.g)*r),s=Math.round((n.b-t.b)*r),u=Math.round((n.a-t.a)*r);return new e([t.r+i,t.g+a,t.b+s,t.a+u])}},{key:"gradient",value:function(t,e){var n=1.01/(t.length-1),r=Math.floor(e/n),i=e%n/n;return this.transition(t[r],t[r+1],i)}}]),h()(e,t),e}(O);E.Register(),E.Attributes=[new O.Attributes.Integer("r",!1,0),new O.Attributes.Integer("g",!1,0),new O.Attributes.Integer("b",!1,0),new O.Attributes.Float("a",!1,1)];var G=function(t){function e(){return c()(this,e),v()(this,m()(e).apply(this,arguments))}return h()(e,t),e}(O);G.Register(),G.Attributes=[new O.Attributes.String("name"),new O.Attributes.Integer("year"),new O.Attributes.String("country"),new O.Attributes.String("countryCode"),new O.Attributes.String("gender"),new O.Attributes.Float("time")];var x=G,D={name:"RacerDot",props:{hidden:Boolean,color:[E,String],racer:G,secondsElapsed:[Number],totalDistance:{default:820}},computed:{distance:function(){return Math.min(this.secondsElapsed/this.racer.time,1)*this.totalDistance},transform:function(){return"translateY(".concat(this.distance,"px)")},trailHeight:function(){return"".concat(this.distance+8,"px")}}},F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"racer-dot",class:{hidden:t.hidden}},[n("div",{staticClass:"racer-label"},[t._v(t._s(t.racer.year))]),n("div",{staticClass:"trail",style:{height:t.trailHeight}}),n("div",{staticClass:"dot",style:{background:t.color,transform:t.transform}})])},N=[],M=n("XyMi");function C(t){n("X4FV")}var R=!1,j=C,P="data-v-25f4c76e",z=null,T=Object(M["a"])(D,F,N,R,j,P,z),I=T.exports,J={USA:"us",JAM:"jm",RSA:"za",GBR:"gb",CAN:"ca",POL:"pl",NED:"nl",AUS:"au",EUA:"de",GDR:"de",URS:"ru",FRG:"de",TTO:"tt",GRE:"gr",BLR:"by"},K={name:"RacerScore",props:{color:[E,String],racer:G},computed:{flag:function(){return J[this.racer.countryCode]}}},q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"score-item"},[n("span",{staticClass:"year",style:{background:t.color}},[t._v(t._s(t.racer.year))]),n("span",{staticClass:"name"},[t._v(t._s(t.racer.name))]),n("span",{staticClass:"flag"},[n("img",{attrs:{src:"flags/"+t.flag+".png",alt:""}})]),n("span",{staticClass:"country"},[t._v(t._s(t.racer.countryCode))]),n("span",{staticClass:"time"},[t._v(t._s(t.racer.time.trimPrecision(2).pad(0,2,","))+"s")])])},H=[];function L(t){n("2DFY")}var U=!1,V=L,Y="data-v-51a7217c",B=null,X=Object(M["a"])(K,q,H,U,V,Y,B),Z=X.exports,Q=function(){function t(){c()(this,t)}return y()(t,null,[{key:"load",value:function(){var t=a()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetch();case 2:return t.abrupt("return",this.lines.map(function(t){return new x({name:t[7],year:t[0],country:t[1],countryCode:t[2],gender:t[5],time:parseFloat(t[6])})}));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"fetch",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(a()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("data.tsv");case 2:return e=t.sent,t.next=5,e.text();case 5:e=t.sent,this.lines=e.split("\n").map(function(t){return t.split("\t")}),this.lines.splice(0,1);case 8:case"end":return t.stop()}},t,this)})))}]),t}(),W=(n("YVn/"),function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c()(this,e),n=v()(this,m()(e).call(this)),n.compareFn=t,n.direction=r,n.priority=i,n}return y()(e,[{key:"compare",value:function(t,e){return this.direction?this.direction*this.compareFn(t,e):0}},{key:"cycle",value:function(t){var n=0;t&&(n=e.maxPriority(t)+1),0===this.direction?(this.direction=1,this.priority=n):1===this.direction?this.direction=-1:(this.direction=0,this.priority=0)}}],[{key:"sort",value:function(t,e){return e instanceof Array||(e=Object.values(e)),e=e.filter(function(t){return t.direction}).sort(function(t,e){return t.priority-e.priority}),[].concat(t).sort(function(t,n){var r=!0,i=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var o=s.value,c=o.compare(t,n);if(0!==c)return c}}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return 0})}},{key:"maxPriority",value:function(t){return t instanceof Array||(t=Object.values(t)),t.reduce(function(t,e){return Math.max(t||e.priority,e.priority)},0)}},{key:"fromAttribute",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t)throw"Can't create a mofo sorter from an attribute without the attribute";return new e(function(e,n){return t.compare(e,n)},n,r)}}]),h()(e,t),e}(_)),tt=W,et=[new E([0,0,255,1]),new E([0,255,180,1]),new E([0,255,0,1]),new E([180,255,0,1]),new E([255,0,180,1]),new E([255,0,0,1])],nt={name:"app",components:{RacerScore:Z,RacerDot:I},data:function(){return{racerPool:[],scores:[],secondsElapsed:0,interval:null,dotsVisible:!1,gender:"M",scoreboardSorter:tt.fromAttribute(G.GetAttribute("time"),1)}},methods:{getColor:function(t){var e=this.racers.indexOf(t),n=e/(this.racers.length-1);return E.gradient(et,n)},stepAnimation:function(t){this.secondsElapsed+=t},clear:function(){this.stop(),this.scores=[],this.secondsElapsed=0},start:function(){var t=this;this.clear(),this.interval=setInterval(function(){t.intervalFn()},100)},stop:function(){this.interval&&clearInterval(this.interval),this.interval=null},intervalFn:function(){this.stepAnimation(.1),this.secondsElapsed>=this.maxTime&&(this.stop(),this.addScores())},addScores:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=tt.sort(this.racers,[this.scoreboardSorter]),i=!0,a=!1,s=void 0;try{for(var u,o=function(){var t=u.value,i=r.indexOf(t);setTimeout(function(){e.scores.push(t)},i*n)},c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)o()}catch(t){a=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}setTimeout(function(){t&&t()},(this.racers.length+1)*n)},setGender:function(t){this.clear(),this.gender=t}},computed:{maxTime:function(){return Math.max.apply(Math,u()(this.racers.map(function(t){return t.time})))},racers:function(){var t=this;return this.racerPool.filter(function(e){return e.gender===t.gender})}},mounted:function(){var t=a()(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Q.load();case 2:this.racerPool=t.sent,setTimeout(function(){e.dotsVisible=!0},50);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"dots"},t._l(t.racers,function(e){return n("racer-dot",{key:e.GetUId(),attrs:{hidden:!t.dotsVisible,color:t.getColor(e),racer:e,secondsElapsed:t.secondsElapsed}})})),n("div",{staticClass:"score-board"},[n("transition-group",{attrs:{name:"score",tag:"div"}},t._l(t.scores,function(e){return n("racer-score",{key:e.GetUId(),attrs:{color:t.getColor(e),racer:e,secondsElapsed:t.secondsElapsed}})}))],1),n("div",{staticClass:"controls"},[n("button",{on:{click:t.start}},[t._v("START")]),t.interval?n("button",{on:{click:t.stop}},[t._v("STOP")]):t._e(),n("br"),n("button",{on:{click:function(e){t.setGender("M")}}},[t._v("MALE")]),n("button",{on:{click:function(e){t.setGender("F")}}},[t._v("FEMALE")])])])},it=[];function at(t){n("+VGo")}var st=!1,ut=at,ot=null,ct=null,lt=Object(M["a"])(nt,rt,it,st,ut,ot,ct),ht=lt.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(ht)}}).$mount("#app")},X4FV:function(t,e){}},[0]);
//# sourceMappingURL=app.499c0106.js.map